# --- 1. NUEVA BASE DE CONOCIMIENTO PARA LA AUDITOR√çA ---
AUDIT_KNOWLEDGE_BASE = {
    "exceso_stock_estrella": {
        "why": "Un exceso de stock en un producto 'üåü Estrella' es un 'problema bueno', pero un problema al fin y al cabo. Indica que est√°s invirtiendo fuertemente en tu crecimiento, pero quiz√°s de forma demasiado agresiva, lo que puede afectar tu flujo de caja.",
        "how": [
            "Ejecuta el 'Plan de Compra Sugerido' para ver que la sugerencia de compra es cero.",
            "Analiza la 'Cobertura Actual en D√≠as' para entender cu√°ntos meses de venta tienes cubiertos.",
            "Considera reducir ligeramente tu pr√≥xima orden de compra para este item y reasignar ese capital a un '‚ùì Dilema' prometedor."
        ]
    },
    "exceso_stock_vaca": {
        "why": "Este es el 'capital perezoso' en su forma m√°s pura. Tienes demasiado dinero invertido en un producto rentable pero que no est√° creciendo. Cada sol extra aqu√≠ es un sol que no est√° trabajando para financiar tus verdaderos motores de crecimiento.",
        "how": [
            "Ejecuta el 'An√°lisis Estrat√©gico de Rotaci√≥n' para confirmar su bajo crecimiento y alta cobertura.",
            "Lanza una promoci√≥n controlada para reducir el exceso de stock sin devaluar el producto.",
            "Ajusta tus par√°metros de reposici√≥n para este producto, reduciendo los d√≠as de cobertura ideal.",
            "Usa el capital liberado para invertir en tus 'üåü Estrellas' o para experimentar con nuevos productos."
        ]
    },
    "oportunidad_clase_b": {
        "why": "Un producto 'üêÆ Vaca Lechera' con una velocidad de venta creciente es una futura 'üåü Estrella'. Identificarlo a tiempo te permite potenciar su crecimiento antes que tu competencia y asegurar tus futuras fuentes de ingreso.",
        "how": [
            "Ejecuta el 'An√°lisis Estrat√©gico de Rotaci√≥n' para monitorear su '√çndice de Importancia' y su tendencia.",
            "Aseg√∫rate de que nunca tenga quiebres de stock. Tr√°talo como si ya fuera un 'üåü Estrella'.",
            "Considera darle una mejor ubicaci√≥n en tu tienda o destacarlo en tu e-commerce para acelerar su crecimiento.",
            "Habla con tu proveedor para asegurar un buen volumen de compra a un precio competitivo."
        ]
    },
    "heroes_en_declive": {
        "why": "Esta es una alerta cr√≠tica. Un producto que era importante y rentable ('üåü Estrella' o 'üêÆ Vaca Lechera') y que est√° perdiendo popularidad r√°pidamente es un indicador temprano de un futuro problema de stock muerto y una se√±al de un posible cambio en el mercado.",
        "how": [
            "Ejecuta el 'An√°lisis Estrat√©gico de Rotaci√≥n' para investigar a fondo la tendencia de este producto.",
            "Habla con tu equipo de ventas: ¬øLos clientes han dejado de preguntar por √©l? ¬øHay un producto sustituto (tuyo o de la competencia) que lo est√© desplazando?",
            "Revisa si ha habido un aumento de precio reciente que podr√≠a estar afectando su demanda.",
            "Considera reducir gradualmente tus niveles de compra para este item para evitar un futuro exceso de stock."
        ]
    },
    "inversion_ineficiente_perro": {
        "why": "Un producto 'üê∂ Perro' es un activo de bajo rendimiento. Invertir capital en reponerlo, cuando podr√≠a usarse para comprar 'üåü Estrellas' o 'Vacas Lecheras', es una ineficiencia. Esta alerta te ayuda a optimizar cada sol de tu presupuesto de compras.",
        "how": [
            "Ejecuta el 'Plan de Compra Sugerido' para ver la lista completa de estos productos.",
            "Para estos items, considera usar el 'Pedido M√≠nimo Sugerido' en lugar del 'Ideal' para minimizar la inversi√≥n.",
            "Eval√∫a si algunos de estos productos deber√≠an ser descontinuados de tu cat√°logo en lugar de ser repuestos.",
            "Filtra por categor√≠a o marca para ver si tienes un problema sistem√°tico de reposici√≥n de productos de bajo rendimiento."
        ]
    },
    "inconsistencias_datos_criticos": {
        "why": "'Basura entra, basura sale'. Si los datos de tus productos m√°s importantes son incorrectos (ej. precio de compra en cero o categor√≠a faltante), todos los an√°lisis de rentabilidad y estrategia en esta plataforma ser√°n imprecisos. Corregir esto es fundamental para confiar en tus resultados.",
        "how": [
            "Ejecuta la 'Auditor√≠a de Integridad de Cat√°logo' para obtener una lista completa de los productos con errores.",
            "Dedica tiempo a actualizar la informaci√≥n faltante (Marca, Categor√≠a, Precio de Compra, Precio de Venta, Productos Duplicados) directamente en tu sistema de punto de venta o inventario.",
            "Establece un proceso para que cada nuevo producto que se ingrese al sistema tenga todos sus datos completos desde el inicio."
        ]
    },
    # --- ERRORES CR√çTICOS ---
    "quiebre_stock_clase_a": {
        "why": "Un producto 'üåü Estrella' es uno de tus items m√°s importantes y rentables. Un quiebre de stock significa que est√°s perdiendo ventas directas en tus productos m√°s valiosos y, peor a√∫n, arriesgando que un cliente fiel se vaya a la competencia.",
        "how": [
            "Ejecuta el 'Plan de Compra Sugerido' inmediatamente para generar una orden de compra priorizada.",
            "Contacta a tu proveedor para verificar si hay un pedido en camino o si puedes acelerar la entrega.",
            "Considera aumentar el 'Stock de Seguridad' para este producto en el reporte de 'Par√°metros para POS' para prevenir futuros quiebres."
        ]
    },
    "quiebre_stock_clase_b": {
        "why": "Un producto 'üêÆ Vaca Lechera' es un pilar fundamental de tu negocio. Genera ventas constantes y predecibles, siendo una de tus fuentes de ingresos m√°s seguras. Un quiebre de stock significa que est√°s perdiendo ventas garantizadas y, lo que es m√°s cr√≠tico, est√°s defraudando la confianza de tus clientes habituales que esperan encontrar siempre este producto en tu tienda.",
        "how": [
            "Ejecuta el 'Plan de Compra Sugerido' para confirmar la cantidad ideal a reponer y prioriza este producto en tu pr√≥xima orden de compra.",
            "Asegura un alto nivel de servicio para tus 'üêÆ Vacas Lecheras'. Considera ajustar su 'Stock M√≠nimo' o 'Punto de Alerta' para tener un mayor colch√≥n de seguridad.",
            "Contacta a tu proveedor. Al ser productos de venta segura, puedes negociar mejores condiciones por compras de mayor volumen o entregas programadas."
        ]
    },
    "stock_muerto_perro": {
        "why": "Un producto 'üê∂ Perro' con stock muerto es capital inmovilizado en un activo de bajo rendimiento. Ocupa espacio y consume recursos sin contribuir significativamente a tu negocio.",
        "how": [
            "Ejecuta el 'Plan de Liquidaci√≥n' para ver la lista completa y priorizar por valor.",
            "Considera una liquidaci√≥n agresiva (ofertas 2x1, descuentos) para recuperar el capital r√°pidamente.",
            "Eval√∫a descontinuar este producto de tu cat√°logo para simplificar tu inventario."
        ]
    },
    "stock_muerto_heroe_caido": {
        "why": "Esta es una alerta cr√≠tica. Un producto que era importante ('üêÆ Vaca Lechera' o 'üåü Estrella') y que ha dejado de venderse indica un cambio significativo en el mercado, la aparici√≥n de un competidor o un problema con el producto mismo.",
        "how": [
            "Ejecuta la 'Investigaci√≥n de Causa Ra√≠z' para un an√°lisis de 360¬∞ del producto.",
            "Habla con tu equipo de ventas: ¬øLos clientes han dejado de preguntar por √©l? ¬øPor qu√©?",
            "Analiza si un nuevo producto (tuyo o de la competencia) lo ha reemplazado.",
            "Contacta al proveedor para entender si hay problemas de calidad o de mercado."
        ]
    },
    "margen_negativo_alta_rotacion": {
        "why": "Este es uno de los problemas m√°s peligrosos. Est√°s perdiendo dinero activamente con cada venta de tus productos m√°s populares. Es como una m√°quina que trabaja m√°s r√°pido mientras m√°s dinero pierde, erosionando tus ganancias silenciosamente.",
        "how": [
            "Ejecuta la 'Auditor√≠a de Desviaci√≥n de Margen' para un an√°lisis detallado.",
            "Verifica inmediatamente el 'Precio de Compra Actual' vs. el 'Precio de Venta' en tu sistema. Puede ser un error de tipeo.",
            "Revisa si un proveedor ha aumentado sus precios recientemente y no has actualizado los tuyos.",
            "Audita si se est√°n aplicando descuentos no autorizados en el punto de venta."
        ]
    },

    # --- ADVERTENCIAS IMPORTANTES ---
    "stock_muerto_alto_valor": {
        "why": "El stock muerto es capital inmovilizado. Cada sol atrapado en productos que no se venden es un sol que no puedes usar para comprar inventario que s√≠ rota, pagar a proveedores o invertir en el crecimiento de tu negocio.",
        "how": [
            "Ejecuta el 'Diagn√≥stico de Stock Muerto' y ordena por 'Mayor Valor Inmovilizado'.",
            "Crea una oferta 'combo', empaquetando este producto con un 'üåü Estrella' de alta venta.",
            "Lanza una liquidaci√≥n r√°pida en una zona de alta visibilidad de tu tienda o en marketplaces online.",
            "Filtra por marca y usa la lista para negociar devoluciones o notas de cr√©dito con tu proveedor."
        ]
    },
    "exceso_stock_clase_ab": {
        "why": "Tener stock de tus productos importantes es bueno, pero tener demasiado es 'capital perezoso'. Inmoviliza tu flujo de caja, aumenta tus costos de almacenamiento y te expone al riesgo de que el producto se da√±e o se vuelva obsoleto.",
        "how": [
            "Ejecuta el 'An√°lisis Estrat√©gico de Rotaci√≥n' para entender la cobertura en d√≠as.",
            "Considera una promoci√≥n temporal para reducir el exceso sin da√±ar la percepci√≥n del precio a largo plazo.",
            "Revisa y ajusta las cantidades de tus √≥rdenes de compra para estos productos.",
            "Usa el capital liberado para invertir en productos 'üêÆ Vaca Lechera' emergentes."
        ]
    },
    # --- OPORTUNIDADES DE OPTIMIZACI√ìN ---
    "inversion_ineficiente_clase_c": {
        "why": "Los productos 'Clase C' son la 'larga cola' de tu inventario. Son necesarios, pero invertir demasiado capital en reponerlos puede desviar recursos de tus verdaderos motores de venta ('üåü Estrella'). Se trata de optimizar cada sol gastado.",
        "how": [
            "Ejecuta el 'Plan de Compra Sugerido' y filtra por 'Clase C'.",
            "Para estos productos, considera usar el 'Pedido M√≠nimo Sugerido' en lugar del 'Ideal' para minimizar la inversi√≥n.",
            "Eval√∫a si algunos de estos productos pueden ser comprados con menos frecuencia pero en mayor volumen para reducir la gesti√≥n."
        ]
    },
    
    # --- NUEVA ENTRADA PARA LA ALERTA DE EFICIENCIA DE MARGEN ---
    "eficiencia_margen_baja": {
        "why": "Una baja eficiencia de margen es una 'fuga de rentabilidad silenciosa'. Significa que, aunque tus productos sean rentables en papel, en la pr√°ctica (por descuentos, errores o costos no actualizados) est√°s dejando de ganar una cantidad significativa de dinero que te corresponde.",
        "how": [
            "Ejecuta la 'Auditor√≠a de Desviaci√≥n de Margen' para identificar los productos espec√≠ficos con la mayor desviaci√≥n.",
            "Ordena por 'Mayor Impacto Financiero' para encontrar las 'fugas' de dinero m√°s grandes.",
            "Revisa si los precios de compra de tus proveedores han subido recientemente y ajusta tus precios de venta en consecuencia.",
            "Audita tus procesos en el punto de venta para asegurar que los descuentos se apliquen correctamente."
        ]
    }
}